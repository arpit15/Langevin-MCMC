<scene version="0.6.0">



	<default name="spp" value="128" />
	<default name="resx" value="324" />
	<default name="resy" value="243" />

	<default name="PDMSIOR" value="1.421" />
	<default name="EPOXYIOR" value="1.49" />

	<default name="pixel" value="rgb"/>


	<integrator type="pssmlt">
		<boolean name="bidirectional" value="true"/>
		<!-- <string name="technique" value="path"/> -->
		<boolean name="twoStage" value="true"/>
		<integer name="maxDepth" value="-1" />
	</integrator>

	<sensor type="perspective" id="Camera">
		<string name="fovAxis" value="x" />
		<!-- <float name="fov" value="102.000003" /> -->
		<float name="fov" value="106" />
		<float name="nearClip" value="0.001000" />
		<float name="farClip" value="1000.000000" />
		<!-- <transform name="toWorld">
			<rotate x="1" angle="179.999991348578" />
			<rotate y="1" angle="-4.785268921648044e-21" />
			<rotate z="1" angle="180.00000500895632" />
			<translate x="0.000000" y="0.022200" z="0.003000" />
		</transform> -->
		<transform name="toWorld">
			<matrix value="-1.000000 0.000000 0.000000 0.000000 0.000000 1.000000 0.000000 0.020 -0.000000 0.000000 -1.000000 0.0012 0.000000 0.000000 0.000000 1.000000" />
			<rotate z="1" angle="-2"/>
			<rotate x="1" angle="5"/>
		</transform>
		<sampler type="independent">
			<integer name="sampleCount" value="$spp" />
		</sampler>
		<film type="hdrfilm">
			<string name="pixelFormat" value="$pixel"/>
			<integer name="width" value="$resx" />
			<integer name="height" value="$resy" />
			<boolean name="banner" value="false" />
		</film>
	</sensor>


	<include filename="lights_spec.xml"/>


	
	<bsdf type="twosided" id="mat-Material.002">
		<bsdf type="diffuse">
			<texture type="bitmap" name="reflectance">
				<string name="filename" value="textures/exact_cylinder_crop2.png" />
			</texture>
		</bsdf>
	</bsdf>

	<bsdf type="twosided" id="mat-al">
			<bsdf type="roughdiffuse">
				<rgb name="reflectance" value="0.37, 0.4, 0.37" />
				<float name="alpha" value="0.1"/>
			</bsdf>
		</bsdf>

	<bsdf id="mat-br" type="blendbsdf">
		<float name="weight" value="0.85" />
		
		
		<bsdf type="twosided" id="mat-coateddiff2">
			<bsdf type="diffuse" id="mat-coateddiff">
				<rgb name="reflectance" value="0.8, 0.5, 0.3" />
			</bsdf>
		</bsdf>



		<bsdf type="twosided" id="mat-coatedcond">
			<bsdf type="roughconductor">
				<string name="material" value="none"/>
				<rgb name="eta" value="0.47553385 0.57597149 0.76444718"/>
				<rgb name="k" value="0.8772515  0.81142953 0.63085948"/>

				<!-- <float name="extEta" value="1.0"/> -->

				<string name="distribution" value="beckmann"/>
				<float name="alpha" value="0.175" />
				<rgb name="specularReflectance" value="1.0" />
			</bsdf>
		</bsdf>
	</bsdf>
		
	<bsdf id="mat-Epoxy" type="roughdielectric">
		<float name="alpha" value="0.108900" />
		<string name="distribution" value="beckmann" />
		<float name="intIOR" value="$EPOXYIOR" />
		<float name="extIOR" value="1" />
		<rgb name="specularTransmittance" value="1.000000 1.000000 1.000000" />
	</bsdf>

	<shape type="ply" id="mesh-Epoxy shell v3">
		<string name="filename" value="meshes/Epoxy shell v3.ply" />
		<ref id="mat-Epoxy" name="bsdf" />
	</shape>

	<bsdf id="mat-interface" type="roughdielectric">
		<float name="alpha" value="0.000400" />
		<string name="distribution" value="beckmann" />
		<float name="intIOR" value="$PDMSIOR" />
		<float name="extIOR" value="$EPOXYIOR" />
		<rgb name="specularTransmittance" value="1.000000 1.000000 1.000000" />
	</bsdf>

	<shape type="ply" id="mesh-interface">
		<string name="filename" value="meshes/interface.ply" />
		<ref id="mat-interface" name="bsdf" />
	</shape>

	<bsdf id="mat-lightboard" type="roughdielectric">
		<float name="alpha" value="0.000400" />
		<string name="distribution" value="beckmann" />
		<float name="intIOR" value="$EPOXYIOR" />
		<float name="extIOR" value="1.0" />
		<rgb name="specularTransmittance" value="1.000000 1.000000 1.000000" />
	</bsdf>

	<shape type="ply" id="mesh-lightboard">
		<string name="filename" value="meshes/lightboard.ply" />
		<ref id="mat-lightboard" name="bsdf" />
	</shape>


	<shape type="ply" id="mesh-diffuseLayer">
		<string name="filename" value="meshes/diffuse_layer.ply" />
		<ref id="mat-al" name="bsdf" />
	</shape>

	<shape type="sphere">
		<!-- <string name="filename" value="meshes/unit_sphere.ply" /> -->
		<transform name="toWorld">
			<scale value="0.002"/>
			<!-- <translate x="0.005" y="0.018" z="-0.021"/> -->
			<!-- <translate x="0.0" y="0.027" z="-0.023"/> -->
			<!-- <translate x="0.007" y="0.018" z="-0.020"/> -->
			<!-- <translate x="-0.013" y="0.023" z="-0.016"/> -->

			<translate x="$spherex" y="$spherey" z="$spherez"/>
		</transform>
	</shape>

</scene>